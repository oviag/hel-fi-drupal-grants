!function(e,t){"use strict";var o=!1,n=!1;t.behaviors.webformUnsaved={clear:function(){o=!1},get:function(){return o},set:function(e){o=e},attach:function(n){e(".js-webform-unsaved[data-webform-unsaved]").once("data-webform-unsaved").length?o=!0:e('.js-webform-unsaved :input:not(:button, :submit, :reset, [type="hidden"])').once("webform-unsaved").on("change keypress",(function(e,t){"webform.states"!==t&&(o=!0)})),e('.js-webform-unsaved button, .js-webform-unsaved input[type="submit"]',n).once("webform-unsaved").not("[data-webform-unsaved-ignore]").on("click",(function(n){if(e(this).hasClass("webform-button--reset")&&o&&!window.confirm(t.t("Changes you made may not be saved.")+"\n\n"+t.t("Press OK to leave this page or Cancel to stay.")))return!1;o=!1})),void 0!==t.Ajax&&void 0===t.Ajax.prototype.beforeSubmitWebformUnsavedOriginal&&(t.Ajax.prototype.beforeSubmitWebformUnsavedOriginal=t.Ajax.prototype.beforeSubmit,t.Ajax.prototype.beforeSubmit=function(e,t,n){return o=!1,this.beforeSubmitWebformUnsavedOriginal.apply(this,arguments)}),window.CKEDITOR&&!CKEDITOR.webformUnsaved&&(CKEDITOR.webformUnsaved=!0,CKEDITOR.on("instanceCreated",(function(e){e.editor.on("change",(function(e){o=!0}))})))}},e("a").on("click",(function(a){let r=document.querySelector("form");if(o&&!r.contains(a.target)){a.preventDefault();const r=e("<div></div>").appendTo("body");t.dialog(r,{title:t.t("You have unsaved changes. Changes you have made may not be saved."),width:"50%",buttons:[{text:t.t("Cancel"),click(){e(this).dialog("close")}},{text:t.t("Leave the Form"),click(){o=!1,e(this).dialog("close"),n=!0,window.top.location.href=a.target.href}}]}).showModal()}})),e(window).on("beforeunload",(function(){if(o)return!0;n&&(n=!1,o=!0)})),e((function(){(navigator.userAgent.toLowerCase().match(/iphone|ipad|ipod|opera/)||navigator.platform.toLowerCase().match(/iphone|ipad|ipod/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&e("a:not(.use-ajax)").bind("click",(function(o){var n=e(o.target).closest("a"),a=n.attr("href");if(void 0!==a&&!a.match(/^#/)&&""!==a.trim()){if(e(window).triggerHandler("beforeunload")&&!window.confirm(t.t("Changes you made may not be saved.")+"\n\n"+t.t("Press OK to leave this page or Cancel to stay.")))return!1;var r=n.attr("target");return r?window.open(a,r):window.location.href=a,!1}}))}))}(jQuery,Drupal);